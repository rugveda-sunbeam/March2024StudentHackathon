package com.sunbeam.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import com.sunbeam.entity.User;
import com.sunbeam.utils.DbUtil;

public class UserDao implements AutoCloseable {
	private Connection connection;

	public UserDao() throws SQLException {
		connection = DbUtil.getConnection();
	}

	public void register(User user) throws SQLException {
        String sql = "INSERT INTO user(full_name, email, password, phone, created_time) VALUES (?, ?, ?, ?, ?)";
        try (PreparedStatement preparedStatement = connection.prepareStatement(sql)) {
            preparedStatement.setString(1, user.getFull_name());
            preparedStatement.setString(2, user.getEmail());
            preparedStatement.setString(3, user.getPassword());
            preparedStatement.setString(4, user.getPhone());
            preparedStatement.setTimestamp(5, new java.sql.Timestamp(user.getCreated_time().getTime()));
            System.out.println(preparedStatement);
            preparedStatement.executeUpdate();
        }
    }
	@Override
	public void close() throws Exception {
		// TODO Auto-generated method stub

	}
}
